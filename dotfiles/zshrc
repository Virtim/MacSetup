# MacSetup ZSH Configuration
# This file is managed in the MacSetup repository
# System ~/.zshrc should source this file

# Determine dotfiles directory
DOTFILES_DIR="${0:A:h}"  # Directory containing this file

# Path to your oh-my-zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Oh My Zsh theme
ZSH_THEME="robbyrussell"

# History settings
HIST_STAMPS='mm/dd/yyyy'

# Oh My Zsh plugins
plugins=(git)

# Load Oh My Zsh if installed
[[ -d "$ZSH" ]] && source $ZSH/oh-my-zsh.sh

# Load common configuration (cross-platform)
[[ -f "$DOTFILES_DIR/common.sh" ]] && source "$DOTFILES_DIR/common.sh"

# Load common aliases
[[ -f "$DOTFILES_DIR/common-aliases.sh" ]] && source "$DOTFILES_DIR/common-aliases.sh"

# Load common functions
[[ -f "$DOTFILES_DIR/common-functions.sh" ]] && source "$DOTFILES_DIR/common-functions.sh"

# Load macOS-specific configuration if on macOS
[[ "$(uname)" == "Darwin" ]] && [[ -f "$DOTFILES_DIR/macos.sh" ]] && source "$DOTFILES_DIR/macos.sh"

# Load company/job-specific configuration from ~/.company/
# All .sh files in ~/.company/ are automatically sourced
# This directory lives outside the repo to keep company configs separate
if [[ -d "$HOME/.company" ]]; then
  for company_config in "$HOME/.company"/*.sh(N); do
    [[ -f "$company_config" ]] && source "$company_config"
  done
fi

# Load local configuration (not tracked in git - for secrets/private config)
# This loads last so it can override any previous settings
[[ -f "$DOTFILES_DIR/local.zsh" ]] && source "$DOTFILES_DIR/local.zsh"

# Bash completion support
autoload -U +X bashcompinit && bashcompinit

# ZSH syntax highlighting (if installed via Homebrew on macOS)
if [[ "$(uname)" == "Darwin" ]]; then
  [[ -f "/opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" ]] && \
    source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi
